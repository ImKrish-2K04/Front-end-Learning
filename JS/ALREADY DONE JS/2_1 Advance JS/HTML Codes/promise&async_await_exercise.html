<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Demo doc</title>
  </head>
  <body>
    <h1>code solution</h1>

    <!--
      
      ! Q.No.1
      ?  write a program to load a javascript file in a browser using promise. use '.then()' to display the alert when the load is complete...
      
      ! Q.No.2
      ?  write the same program in the previous question and use async/await syntax...
      
      ! Q.No.3
      ?  create a promise which rejecs after 3 seconds, use async/await to get its value. use a try-catch to handle it error...
      
      ! Q.No.4
      ?  write a program using promise.all() inside an async/await to await 3 promises. compare its result with the case where we await these promise one by one...

    -->

    <script>
      /*
      // Q1: write a program to load a javascript file in a browser using promise. use '.then()' to display the alert when the load is complete...

      let loadExternalScript = (src) => {
        return new Promise((resolve, reject) => {
          let script = document.createElement("script");
          script.src = src;
          document.body.appendChild(script);

          script.onload = () => resolve("Script loaded successfully");
          script.onerror = () => reject("Script is failed to load!");
        });
      };

      loadExternalScript(
        "https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      )
        .then((res) => alert(res))
        .catch((err) => alert(err));
      */

      /*
      // Q2: write the same program in the previous question and use async/await syntax...

      let loadExternalScript = (src) => {
        return new Promise((resolve, reject) => {
          let script = document.createElement("script");
          script.src = src;
          document.body.appendChild(script);

          script.onload = () => resolve("Script loaded successfully!");
          script.onerror = () => reject("Script is failed to be loaded!");
        });
      };

      async function callMe(src) {
        let result = await loadExternalScript(src);
        console.log(result);
      }

      callMe(
        "https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      );
      */

      /*
      // Q3: create a promise which rejecs after 3 seconds, use async/await to get its value. use a try-catch to handle it error...

      let myPromise1 = new Promise((resolve, reject) => {
        setTimeout(() => {
          reject(new Error("Fuck off!"));
        }, 3000);
      });

      async function doReject() {
        try {
          let rejects = await myPromise1;
        } catch (err) {
          console.log(err.message);
        }
      }

      doReject();
      */

      /*
      // write a program using promise.all() inside an async/await to await 3 promises. compare its result with the case where we await these promise one by one...

      let promise1 = new Promise((resolve) => {
        setTimeout(() => {
          resolve("Promise1 is resolved!");
        }, 1000);
      });

      let promise2 = new Promise((resolve) => {
        setTimeout(() => {
          resolve("Promise2 is resolved!");
        }, 2000);
      });

      let promise3 = new Promise((resolve) => {
        setTimeout(() => {
          resolve("Promise3 is resolved!");
        }, 3000);
      });

      async function callAll() {
        try {
          let promiseAll = await Promise.all([promise1, promise2, promise3]);
          promiseAll.forEach((proValue) => {
            console.log(proValue);
          });
        } catch (err) {
          console.log(err);
        }
      }

      callAll();
      */
    </script>
  </body>
</html>
